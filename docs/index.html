<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Diccionario de Procedimientos</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Sistema unificado de procedimientos y automatizaciones">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">

  <style>
    :root {
      --theme-color: #2c3e50;
      --sidebar-width: 300px;
    }

    /* ===== BOTÃ“N â˜° â€” ARRIBA, SIEMPRE VISIBLE ===== */
    .sidebar-toggle {
      top: 10px !important;
      bottom: auto !important;
      left: 10px !important;
      z-index: 101 !important;
      background: transparent !important;
      box-shadow: none !important;
      padding: 4px !important;
      width: 36px !important;
    }

    /* LÃ­neas blancas cuando sidebar abierto */
    .sidebar-toggle span {
      background-color: #fff !important;
    }

    /* LÃ­neas oscuras cuando sidebar cerrado */
    body.close .sidebar-toggle span {
      background-color: var(--theme-color) !important;
    }

    /* ===== SEARCH â€” reposicionar arriba del todo en el sidebar ===== */
    .sidebar .search {
      position: sticky !important;
      top: 0 !important;
      z-index: 100 !important;
      background: var(--theme-color) !important;
      padding: 10px 12px 10px 52px !important; /* 52px = espacio para el â˜° */
      margin: 0 !important;
      border-bottom: none !important;
    }

    .sidebar .search input {
      border: none !important;
      border-radius: 16px !important;
      background: rgba(255,255,255,0.18) !important;
      color: #fff !important;
      padding: 6px 12px 6px 28px !important;
      font-size: 0.85rem !important;
      width: 100% !important;
      outline: none !important;
    }

    .sidebar .search input::placeholder {
      color: rgba(255,255,255,0.6) !important;
    }

    .sidebar .search input:focus {
      background: rgba(255,255,255,0.28) !important;
      border: none !important;
      box-shadow: none !important;
    }

    /* Icono de lupa nativo */
    .sidebar .search .input-wrap label {
      color: rgba(255,255,255,0.7) !important;
    }

    /* Panel de resultados â€” flotante, no expande la barra */
    .sidebar .search .results-panel {
      position: fixed !important;
      top: 50px !important;
      left: 0 !important;
      width: var(--sidebar-width) !important;
      max-height: 400px !important;
      overflow-y: auto !important;
      background: #fff !important;
      border-radius: 0 0 8px 8px !important;
      box-shadow: 0 6px 16px rgba(0,0,0,0.18) !important;
      margin: 0 !important;
      z-index: 999 !important;
    }

    .sidebar .search .results-panel .matching-post {
      border-bottom: 1px solid #f0f0f0 !important;
      padding: 10px 14px !important;
    }

    .sidebar .search .results-panel .matching-post:hover {
      background: #f5f7f9 !important;
    }

    .sidebar .search .results-panel h2 {
      font-size: 0.88rem !important;
      color: var(--theme-color) !important;
      margin: 0 0 3px !important;
    }

    .sidebar .search .results-panel p {
      font-size: 0.78rem !important;
      color: #888 !important;
      margin: 0 !important;
    }

    /* Texto "sin resultados" */
    .sidebar .search .results-panel .empty-message {
      padding: 14px !important;
      text-align: center !important;
      color: #aaa !important;
      font-size: 0.85rem !important;
    }

    /* ===== SIDEBAR GENERAL ===== */
    .sidebar {
      background: #f8f9fa;
      padding-top: 0 !important;
    }

    /* El nombre/tÃ­tulo del sitio que pone Docsify */
    .sidebar > h1 {
      margin-top: 8px;
      user-select: none !important;
      -webkit-user-select: none !important;
    }

    /* Evitar selecciÃ³n en todo el sidebar */
    .sidebar {
      user-select: none !important;
      -webkit-user-select: none !important;
    }

    /* Pero sÃ­ permitir selecciÃ³n en el input de bÃºsqueda */
    .sidebar .search input {
      user-select: text !important;
      -webkit-user-select: text !important;
    }

    /* ===== PDF ===== */
    .pdf-container { width: 100%; min-height: 600px; margin: 20px 0; }

    .pdf-viewer {
      width: 100%;
      height: 800px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .pdf-fallback {
      background: #f5f5f5;
      padding: 30px;
      text-align: center;
      border-radius: 8px;
      border: 2px dashed #ddd;
    }

    .pdf-fallback h3 { color: var(--theme-color); margin-bottom: 20px; }

    .pdf-fallback a {
      display: inline-block;
      background: var(--theme-color);
      color: white;
      padding: 12px 24px;
      border-radius: 5px;
      text-decoration: none;
      margin: 10px;
      font-weight: bold;
      transition: opacity 0.3s;
    }

    .pdf-fallback a:hover { opacity: 0.8; }

    /* ===== TARJETAS ===== */
    .procedure-card {
      background: #f5f5f5;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      border-left: 4px solid var(--theme-color);
    }

    .content .sidebar-nav { display: none !important; }

    /* ===== RESPONSIVE ===== */
    @media screen and (max-width: 768px) {
      .pdf-viewer { height: 500px; }
      .sidebar { font-size: 14px; }
      .pdf-fallback a { display: block; margin: 10px 0; }
    }

    /* ===== MENÃš COLAPSABLE ===== */
    .sidebar-nav > ul > li > p {
      cursor: pointer;
      user-select: none;
      font-weight: bold;
      margin: 10px 0 5px 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 0;
      transition: color 0.2s;
    }

    .sidebar-nav > ul > li > p:hover { color: var(--theme-color); }

    .sidebar-nav > ul > li > p::after {
      content: 'â–¾';
      font-size: 12px;
      margin-left: 6px;
      transition: transform 0.25s ease;
      opacity: 0.5;
      flex-shrink: 0;
    }

    .sidebar-nav > ul > li.collapsed > p::after { transform: rotate(-90deg); }
    .sidebar-nav > ul > li.collapsed > ul { display: none; }
    .sidebar-nav > ul > li > ul { overflow: hidden; transition: all 0.25s ease; }
  </style>
</head>
<body>

  <div id="app">Cargando...</div>

  <script>
    window.$docsify = {
      name: 'ðŸ“š Diccionario de Procedimientos',
      repo: '',
      loadSidebar: true,
      hideSidebar: false,
      subMaxLevel: 1,
      auto2top: true,
      maxLevel: 4,

      toc: { tocMaxLevel: 0, target: 'h2' },

      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: 'ðŸ” Buscar procedimientos...',
        noData: 'No se encontraron resultados',
        depth: 6,
        hideOtherSidebarContent: false,
      },

      pagination: { previousText: 'Anterior', nextText: 'Siguiente' },
      copyCode: { buttonText: 'Copiar', errorText: 'Error', successText: 'âœ“ Copiado' },
      alias: { '/.*/_sidebar.md': '/_sidebar.md' },

      plugins: [

        // CERRAR MODAL AL CAMBIAR PÃGINA
        function(hook) {
          hook.beforeEach(function(content) {
            var modal = document.getElementById('pdf-modal');
            if (modal && modal.classList.contains('active')) {
              modal.classList.remove('active');
              var iframe = document.getElementById('modal-iframe');
              if (iframe) iframe.src = '';
              document.body.style.overflow = '';
            }
            return content;
          });
        },

        // MENÃš COLAPSABLE
        function(hook) {
          hook.doneEach(function() {
            setTimeout(function() {
              var currentHash = window.location.hash || '';
              var topItems = document.querySelectorAll('.sidebar-nav > ul > li');

              topItems.forEach(function(li) {
                var p = li.querySelector(':scope > p');
                var ul = li.querySelector(':scope > ul');
                if (!p || !ul) return;

                if (!p.getAttribute('data-collapsible')) {
                  p.setAttribute('data-collapsible', 'true');
                  p.addEventListener('click', function() { li.classList.toggle('collapsed'); });
                }

                var links = li.querySelectorAll('a');
                var tieneActivo = false;
                links.forEach(function(a) {
                  var href = a.getAttribute('href') || '';
                  if (currentHash.indexOf(href.replace(/^#/, '')) !== -1 && href.length > 2) {
                    tieneActivo = true;
                  }
                });

                if (tieneActivo) {
                  li.classList.remove('collapsed');
                } else {
                  if (!li.getAttribute('data-opened')) li.classList.add('collapsed');
                }
              });
            }, 50);
          });
        }

      ]
    }
  </script>

  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code@2"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pdfobject@2.2.8/pdfobject.min.js"></script>

  <script>
    function openPreview(url, title) {
      var modal = document.getElementById("pdf-modal");
      if (!modal) return;
      document.getElementById("modal-title").textContent = title;
      document.getElementById("modal-iframe").src = url;
      modal.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    function closeModal() {
      var modal = document.getElementById("pdf-modal");
      if (!modal) return;
      modal.classList.remove("active");
      document.getElementById("modal-iframe").src = "";
      document.body.style.overflow = "";
    }

    function closePreview(event) {
      if (event.target === document.getElementById("pdf-modal")) closeModal();
    }
  </script>

</body>
</html>